---
title: Leetcodeå„ç±»é¢˜ç›®æ¨¡æ¿åˆ†æé¢˜ç›®æ€»ç»“
categories:
  - java
  
abbrlink: 2701
date: 2025.5.9
tags: 
   - java 
   - æ•°æ®ç»“æ„
   - leetcode
   - ç®—æ³•
---

# æ»‘åŠ¨çª—å£

çœ‹åˆ°ä¸€ä¸²æ•°ç»„ï¼Œè¦æ±‚æ•°é‡çš„æ—¶å€™ï¼Œå¯èƒ½å°±ä¼šç”¨åˆ°æ»‘åŠ¨çª—å£

## å®šé•¿

åªéœ€è¦è€ƒè™‘è¿›å‡ºå³å¯

ç„¶åè€ƒè™‘çª—å£å¤§å°ä¸è¶³çš„æ—¶å€™,continue

æ¨¡æ¿ï¼š

```java
class Solution643{
    public double findMaxAverage(int[] nums, int k){
        int maxS = Integer.MIN_VALUE;
        int s=  0;
        for (int i =0;i<nums.length;i++){
            s +=nums[i];
            if (i<k-1){
                continue;
            }
            maxS = Math.max(maxS,s);
            s -=nums[i-k+1];
        }
        return (double) maxS/k;
    }
}
```

å¤´è¿›å°¾éƒ¨å‡ºï¼Œç„¶åè€ƒè™‘å˜åŒ–

## ä¸å®šé•¿

ä¸å®šé•¿çš„åŸºæœ¬å°±æ˜¯è€ƒè™‘çª—å£çš„ç¼©å°ã€‚

### æ±‚æœ€å€¼

æ¨¡æ¿ï¼š

```java
class Solution2958{
    public int maxSubarrayLength(int[] nums, int k){
        int ans = 0, left= 0;
        Map<Integer,Integer> cnt = new HashMap<>();
        for (int right = 0;right<nums.length;right++){
            cnt.merge(nums[right],1,Integer::sum);
            while (cnt.get(nums[right])>k){
                cnt.merge(nums[left++],-1,Integer::sum);
            }
            ans = Math.max(ans,right-left+1);
        }
        return ans;
    }
}
```

å°±æ˜¯å³è¾¹è¿›å…¥äº†ï¼Œç„¶åcheckä¸€ä¸‹ï¼Œç„¶åè¿›è¡ŒæŸäº›æ“ä½œï¼Œç„¶åå·¦è¾¹å‡ºå»

ä¸€èˆ¬åˆ°æœ€åéœ€è¦çš„éƒ½æ˜¯çª—å£çš„é•¿åº¦right-left+1

### æ±‚æ•°ç›®

åˆ†ä¸ºè¶Šé•¿è¶Šåˆæ³•ï¼Œè¶ŠçŸ­è¶Šåˆæ³•å’Œ**æ°å¥½å½¢**

**è¶Šé•¿è¶Šåˆæ³•**æ˜¯æŒ‡

[left,right] è¿™ä¸ªå­æ•°ç»„æ˜¯ä¸æ»¡è¶³é¢˜ç›®è¦æ±‚çš„ï¼Œä½†åœ¨é€€å‡ºå¾ªç¯ä¹‹å‰çš„æœ€åä¸€è½®å¾ªç¯ï¼Œ**[leftâˆ’1,right]** æ˜¯æ»¡è¶³é¢˜ç›®è¦æ±‚çš„ã€‚ç”±äºå­æ•°ç»„è¶Šé•¿ï¼Œè¶Šèƒ½æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œæ‰€ä»¥é™¤äº† [leftâˆ’1,right]ï¼Œè¿˜æœ‰ [leftâˆ’2,right],[leftâˆ’3,right],â€¦,[0,right] éƒ½æ˜¯æ»¡è¶³è¦æ±‚çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å³ç«¯ç‚¹å›ºå®šåœ¨ right æ—¶ï¼Œå·¦ç«¯ç‚¹åœ¨ 0,1,2,â€¦,leftâˆ’1 çš„æ‰€æœ‰å­æ•°ç»„éƒ½æ˜¯æ»¡è¶³è¦æ±‚çš„ï¼Œè¿™ä¸€å…±æœ‰ **left** ä¸ªã€‚

**è¶ŠçŸ­è¶Šåˆæ³•**æ˜¯æŒ‡ï¼š

[left,right] è¿™ä¸ªå­æ•°ç»„æ˜¯æ»¡è¶³é¢˜ç›®è¦æ±‚çš„ã€‚ç”±äºå­æ•°ç»„è¶ŠçŸ­ï¼Œè¶Šèƒ½æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œæ‰€ä»¥é™¤äº† [left,right]ï¼Œè¿˜æœ‰ **[left+1,right]**,[left+2,right],â€¦,[right,right] éƒ½æ˜¯æ»¡è¶³è¦æ±‚çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å³ç«¯ç‚¹å›ºå®šåœ¨ right æ—¶ï¼Œå·¦ç«¯ç‚¹åœ¨ left,left+1,left+2,â€¦,right çš„æ‰€æœ‰å­æ•°ç»„éƒ½æ˜¯æ»¡è¶³è¦æ±‚çš„ï¼Œè¿™ä¸€å…±æœ‰ **rightâˆ’left+1** ä¸ªã€‚

```java
class Solution713{
    public int numSubarrayProductLessThanK(int[] nums, int k){
        if (k<=1){
            return 0;
        }
        int ans= 0;
        int x = 1;
        int left  = 0;
        for (int right = 0;right<nums.length;right++){
            x *=nums[right];
            while (x>=k){
                x /=nums[left++];
            }
            ans +=right-left+1;
        }
        return ans;
    }
}
```

åŸºæœ¬å·®ä¸å¤šï¼Œéƒ½æ˜¯å³è¾¹è¿›å»äº†ï¼Œï¼Œç„¶åç»è¿‡checkï¼Œç„¶åå·¦è¾¹å‡ºå»ï¼Œçª—å£ç¼©å°ã€‚â€˜

åªä¸è¿‡è¿”å›çš„ä¸åŒç½¢äº†

**æ°å¥½**å°±æ˜¯æ­£å¥½ä¸ºè¿™ä¸ªçš„æ•°ç›®

ä¾‹å¦‚ï¼Œè¦è®¡ç®—æœ‰å¤šå°‘ä¸ªå…ƒç´ å’Œæ°å¥½ç­‰äº k çš„å­æ•°ç»„ï¼Œå¯ä»¥æŠŠé—®é¢˜å˜æˆï¼š

è®¡ç®—æœ‰å¤šå°‘ä¸ªå…ƒç´ å’Œ â‰¥k çš„å­æ•°ç»„ã€‚
è®¡ç®—æœ‰å¤šå°‘ä¸ªå…ƒç´ å’Œ >kï¼Œä¹Ÿå°±æ˜¯ â‰¥k+1 çš„å­æ•°ç»„ã€‚
ç­”æ¡ˆå°±æ˜¯å…ƒç´ å’Œ â‰¥k çš„å­æ•°ç»„ä¸ªæ•°ï¼Œå‡å»å…ƒç´ å’Œ â‰¥k+1 çš„å­æ•°ç»„ä¸ªæ•°ã€‚è¿™é‡ŒæŠŠ > è½¬æ¢æˆ â‰¥ï¼Œä»è€Œå¯ä»¥æŠŠæ»‘çª—é€»è¾‘å°è£…æˆä¸€ä¸ªå‡½æ•° fï¼Œç„¶åç”¨ **f(k) - f(k + 1)** è®¡ç®—ï¼Œæ— éœ€ç¼–å†™ä¸¤ä»½æ»‘çª—ä»£ç ã€‚

æ€»ç»“ï¼š**ã€Œæ°å¥½ã€å¯ä»¥æ‹†åˆ†æˆä¸¤ä¸ªã€Œè‡³å°‘ã€ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªã€Œè¶Šé•¿è¶Šåˆæ³•ã€çš„æ»‘çª—é—®é¢˜ã€‚**

æ³¨ï¼šä¹Ÿå¯ä»¥æŠŠé—®é¢˜å˜æˆ **â‰¤k å‡å» â‰¤kâˆ’1ï¼ˆä¸¤ä¸ªè‡³å¤šï¼‰ã€‚å¯æ ¹æ®é¢˜ç›®é€‰æ‹©åˆé€‚çš„å˜å½¢æ–¹å¼ã€‚**

ä¹Ÿå¯ä»¥æŠŠä¸¤ä¸ªæ»‘åŠ¨çª—å£åˆå¹¶èµ·æ¥ï¼Œç»´æŠ¤åŒä¸€ä¸ªå³ç«¯ç‚¹ *right* å’Œä¸¤ä¸ªå·¦ç«¯ç‚¹ *left*1 å’Œ *left*2ï¼Œæˆ‘æŠŠè¿™ç§å†™æ³•å«åš**ä¸‰æŒ‡é’ˆæ»‘åŠ¨çª—å£**ã€‚

ä¸€èˆ¬æ¥è¯´ä¸€ä¸ªå‡½æ•°å†™f(k) - f(k + 1)

å¦ä¸€ä¸ªå‡½æ•°å®ç°æ»‘åŠ¨çª—å£ï¼Œå°±è¶³å¤Ÿäº†ã€‚

```java
class Solution930{
    public int numSubarraysWithSumA(int[] nums, int goal){
        int ans1 = 0, left1=0,left2=0,ans2=0;
        int sum1=0,sum2=0;
        for (int right = 0;right<nums.length;right++){
            sum1 +=nums[right];
            while (sum1>=goal&&left1<=right){
                sum1 -=nums[left1++];
            }
            ans1 +=left1;
            sum2 +=nums[right];
            while (sum2>=goal+1&&left2<=right){
                sum2 -=nums[left2++];
            }
            ans2 +=left2;
        }
        return ans1-ans2;
    }
    public int numSubarraysWithSum(int[] nums, int goal){
        return atMost(nums,goal)-atMost(nums,goal+1);
    }
    private int atMost(int[] nums, int goal){
        int ans = 0,left = 0,sum = 0;
        for (int right = 0;right<nums.length;right++){
            sum +=nums[right];
            while (sum>=goal&&left<=right){
                sum -=nums[left++];
            }
            ans +=left;
        }
        return ans;
    }
}
```



# äºŒåˆ†æŸ¥æ‰¾

äºŒåˆ†æŸ¥æ‰¾çš„åŸç†å°±æ˜¯å–ä¸€ä¸ªä¸­é—´å€¼ï¼Œç„¶åé‚£ä¸­é—´å€¼å’Œç›®æ ‡å€¼è¿›è¡Œæ¯”è¾ƒã€‚

å¦‚æœæ¯”ç›®æ ‡å€¼å¤§çš„è¯ï¼Œè¯´æ˜ç›®æ ‡å€¼åœ¨å·¦è¾¹ï¼Œä¸­é—´å€¼midå°±å˜ä¸ºå³è¾¹right

ç›¸å¯¹åº”çš„ï¼Œå°äºç›®æ ‡å€¼çš„è¯ï¼Œè¯´æ˜ç›®æ ‡å€¼åœ¨å³è¾¹ï¼Œä¸­é—´å€¼midå°±å˜ä¸ºleft

äºŒåˆ†æŸ¥æ‰¾çš„æ€»ç»“ï¼š

å¿…é¡»æ•°ç»„/åºåˆ—æ˜¯**æœ‰åºçš„**ï¼ŒäºŒåˆ†å‰å¿…é¡»å…ˆè¿›è¡Œæ’åºã€‚

è¦ç¡®å®šæœç´¢åŒºé—´å¸¸è§å½¢å¼ï¼š`[lo, hi]`ã€`[lo, hi)`ã€`(lo, hi]`ã€`(lo, hi)`

ç¡®å®šå¼€åŒºé—´é—­åŒºé—´

å¼€åŒºé—´ï¼š

```java
private int lowerBound(int[] nums,int right,int target){
        int left=-1;
        while (left+1<right){
            int mid = (left+right)>>>1;
            if (nums[mid]>=target){
                right=mid;
            }else {
                left=mid;
            }
        }
        return right;
    }
```

é—­åŒºé—´ï¼š

```java
class Solution{
    public int searchInsert(int[] nums,int target){
        int left = 0,right = nums.length-1;
        while (left<=right){
            int mid = (left+right)/2;
            if (nums[mid] == target){
                return mid;
            }
            else if (nums[mid]<target){
                left =mid+1;
            }
            else {
                right = mid-1;
            }
        }
        return left;
    }
}
```

midçš„å–å€¼ï¼šé€šå¸¸ç”¨ `mid = lo + (hi - lo) / 2`ï¼ˆæˆ–æ— ç¬¦å·å³ç§» `>>> 1`ï¼‰è¿™æ ·æ¥é˜²æ­¢æº¢å‡º

è¿˜è¦è®¾è®¡checkæ¡ä»¶ï¼š

å°†é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªå¸ƒå°”å‡½æ•° `check(mid)`ï¼Œèƒ½å‡†ç¡®å‘Šè¯‰ä½ â€œmid æ˜¯å¦æ»¡è¶³æŸä¾§æ¡ä»¶â€ã€‚

æ ¹æ® `check(mid)` ç»“æœï¼ŒæŠŠ `lo` æˆ– `hi` ç¼©åˆ° `mid` åŠå…¶å·¦ï¼å³ä¸€ä¾§ã€‚

```java
int lo = L, hi = R;
while (lo < hi) {
    int mid = lo + (hi - lo) / 2;
    if (check(mid)) {
        hi = mid;      // ä¿ç•™ mid
    } else {
        lo = mid + 1;  // ä¸¢å¼ƒ mid
    }
}
return lo;

```

`lowerBound`: æ‰¾åˆ°**ç¬¬ä¸€ä¸ª â‰¥ target** çš„ç´¢å¼•

`upperBound`: æ‰¾åˆ°**ç¬¬ä¸€ä¸ª > target** çš„ç´¢å¼•

| åœºæ™¯                    | åŒºé—´å½¢å¼   | å¤‡æ³¨                                           |
| ----------------------- | ---------- | ---------------------------------------------- |
| æŸ¥æ‰¾æŸå€¼ / æ’å…¥ä½ç½®     | `[0, n-1]` | ç»å…¸é—­åŒºé—´ï¼›æ‰¾ä¸åˆ°æ—¶è¿”å› `lo` ä½œä¸ºæ’å…¥ç‚¹       |
| lowerBound / upperBound | `(-1, n]`  | å¼€åŒºé—´ï¼›`left = -1, right = n`                 |
| æœ€æ¥è¿‘å…ƒç´ ï¼ˆå·®å€¼æ¯”è¾ƒï¼‰  | `[0, n-k]` | çª—å£é•¿åº¦ä¸º `k`ï¼Œæ¯”è¾ƒå·¦å³è¾¹ç•Œè·ç¦»å–å†³äºå·®å€¼å¤§å° |
| åŒæŒ‡é’ˆå¯¹æ’              | `lo < hi`  | ä¾‹å¦‚æ‰¾æœ€å¤§æ»¡è¶³æ¡ä»¶çš„ä¸‹æ ‡                       |

**å¯ä»¥ä½¿ç”¨æŸ¥æ‰¾æŸäº›å€¼çš„é—®é¢˜ï¼Œçœå»äº†éå†**

# åŒæŒ‡é’ˆ

## å•åºåˆ—

ç›¸å‘åŒæŒ‡é’ˆï¼šä¸¤ä¸ªæŒ‡é’ˆ *left*=0, *right*=*n*âˆ’1ï¼Œä»æ•°ç»„çš„ä¸¤ç«¯å¼€å§‹ï¼Œå‘ä¸­é—´ç§»åŠ¨ï¼Œè¿™å«**ç›¸å‘åŒæŒ‡é’ˆ**ã€‚ä¸Šé¢çš„æ»‘åŠ¨çª—å£ç›¸å½“äº**åŒå‘åŒæŒ‡é’ˆ**ã€‚

ç„¶ååˆ°ä¸­é—´å»æ±‡èš

ä¸€èˆ¬æ¥è¯´æ¡ä»¶æ˜¯left<right

ç„¶åè¿›è¡Œè¿è¡Œ

### **åŒå‘åŒæŒ‡é’ˆ**

ä¸¤ä¸ªæŒ‡é’ˆçš„ç§»åŠ¨æ–¹å‘ç›¸åŒï¼ˆéƒ½å‘å³ï¼Œæˆ–è€…éƒ½å‘å·¦ï¼‰ã€‚

ä»åŒä¸€ä¸ªæ–¹å‘å¼€å§‹

å¤–å±‚å¾ªç¯æ§åˆ¶å³æŒ‡é’ˆï¼Œå†…å±‚æ¡ä»¶æ»¡è¶³æ—¶ç§»åŠ¨å·¦æŒ‡é’ˆæ”¶ç¼©çª—å£

å°±æ˜¯æ»‘åŠ¨çª—å£å“ˆå“ˆ

### èƒŒå‘åŒæŒ‡é’ˆ

ä»ä¸­é—´å¼€å§‹å¾€ä¸¤è¾¹

### **åŸåœ°ä¿®æ”¹ï¼š**

ä¸»è¦æ˜¯è¿ç”¨åˆ°äº†æ ˆçš„æ€æƒ³

å¸¸ç”¨äºæ•°ç»„åŸåœ°ä¿®æ”¹ï¼Œæ…¢æŒ‡é’ˆæ ‡è®°â€œç»“æœåŒºåŸŸâ€ï¼Œå¿«æŒ‡é’ˆç”¨äºæ‰«æ

**åŸåœ°ä¿®æ”¹+ä¸‹æ ‡**

å°±æ˜¯ä¸‹æ ‡çš„é—®é¢˜

å¦‚æœæ˜¯é¡ºåºæ’åºï¼Œä¸ç¼ºå°‘å…ƒç´ çš„è¯ï¼Œ

|nums[i]| = index+1 é˜²æ­¢è´Ÿæ•°å“ˆ

ç„¶åå¦‚æœæ˜¯ä¹±åºçš„è¯ï¼Œä¹Ÿæ˜¯å¯ä»¥å¯¹åº”èµ·æ¥çš„çš„ 

å¦‚æœif (nums[index]>0){
                nums[index] *=-1;
            }

çš„è¯ï¼Œç¼ºå°‘çš„é‚£ä¸ªæ­£å¥½æ˜¯æ­£æ•°

ç„¶åè¦è¿”å›é‚£ä¸ªæ•°çš„è¯ï¼Œi+1å³å¯

ä¸Šé¢é‚£ä¸ªé¢˜ï¼Œå‡ºç°ä¸¤æ¬¡è·Ÿè¿™ä¸ªç¼ºå°‘æ˜¯ä¸€æ ·çš„

ä¼šæŠŠindexå˜ä¸ºè´Ÿçš„

```
1. å€¼åŸŸæ˜¯ [1, n]ï¼Œè€ƒè™‘ nums[i] - 1 åšä¸‹æ ‡
2. æ ‡è®°ï¼šå°† nums[nums[i] - 1] *= -1
3. æŸ¥è¯¢ï¼š
   - æ‰¾ç¼ºå¤± âœ å“ªäº› index ä¸Šè¿˜ä¸ºæ­£ï¼Œå¯¹åº”å€¼å°±æ˜¯ç¼ºå¤±çš„ i+1
   - æ‰¾é‡å¤ âœ å“ªäº› index ç¬¬ä¸€æ¬¡è®¿é—®æ—¶å°±å·²ç»æ˜¯è´Ÿæ•°

```

ğŸ‘†

## åŒåºåˆ—

### å­åºåˆ—é—®é¢˜

è¿˜æ˜¯æ ‡å‡†çš„å­åºåˆ—é—®é¢˜ï¼Œä¸¤ä¸ªæŒ‡é’ˆç§»åŠ¨ï¼Œå½“æ»¡è¶³æ¡ä»¶çš„æ—¶å€™å­åºåˆ—çš„æŒ‡é’ˆç§»åŠ¨

ç„¶åå­—å…¸çš„ä¸€ç›´ç§»åŠ¨

çœ‹æœ€åå­åºåˆ—çš„æŒ‡é’ˆèƒ½ä¸èƒ½åˆ°æœ«å°¾ï¼Œåˆ°äº†å°±è¯´æ˜æ˜¯ï¼Œååˆ™ä¸æ˜¯

```java
private boolean isSubseq(String s, String t){
        int i =0;
        for (char c:t.toCharArray()){
            if (s.charAt(i)==c&&++i==s.length()){
                return true;
            }
        }
        return false;
    }
```

